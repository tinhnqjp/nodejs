<div id="myTop" class="w3-container w3-top w3-theme w3-large">
    <span id="myIntro" class="w3-hide">法令管理</span>
</div>
<div>
    <strong style="font-size:20px;">法令管理</strong><br/>
</div>
<button type="button" ng-click="vm.saveRules(vm.form.lawRulesForm.$valid)" class="btn btn-primary pull-right" id="btn_save_add">
    <span class="glyphicon glyphicon-floppy-save"></span> 保存</a>
</button>
<a type="button" ng-click="vm.hideLawsRule()" class="mg15r btn btn-warning pull-right">
    キャンセル
</a>
<div style="font-weight:bold; padding-top:10px;">
    <a data-ui-sref="admin.laws.list">一覧 </a> >
    <a ng-click="vm.hideLawsRule()">法令登録 </a> > 条件割当
</div>
<hr>
<!-- #コントロールボタン -->
<!-- 入力Form -->
<div class="row">
    <div class="col-xs-12">
        <div class="panel panel-primary">
            <div class="panel-heading">条件割当</div>
            <div class="panel-body">
                <div>
                    <table id="law_sort_table" class="editableTable table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th class="bg-primary" style="width:50px;">#</th>
                                <th class="bg-primary" style="width:50px;">項目1</th>
                                <th class="bg-primary" style="width:50px;">項目2</th>
                                <th class="bg-primary" style="width:200px;">法文</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="text-align:center;">{{ vm.formLawsRule.info.id }}</td>
                                <td style="text-align:left;">{{ vm.formLawsRule.info.item1 }}</td>
                                <td style="text-align:left;">{{ vm.formLawsRule.info.item2 }}</td>
                                <td style="text-align:left;">{{ vm.formLawsRule.info.legal_text }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div>
                    <a type="button" class="btn btn-success pull-left" id="rule_add_btn" ng-click="vm.pushLawsRule()">
                       <span class="glyphicon glyphicon-plus"></span> 条件追加</a>
                    </a>
                </div>
                <br/><br/>
                <form name="vm.form.lawRulesForm" ng-submit="vm.saveRules(vm.form.lawRulesForm.$valid)" novalidate></form>
                    <div class="rule_fields" data-ng-repeat="rule in vm.formLawsRule.rules">
                        <div class="rule_field_1">
                            <div class="panel-body" style="border:1px solid #999; margin-bottom:10px;">
                                <div class="row">
                                    <div class="col-sm-12 mg10b">
                                    </div>
                                    <div class="col-sm-12">
                                        <table id="law_sort_table" class="editableTable table table-striped table-bordered table-hover">
                                            <thead>
                                                <tr>
                                                    <th class="bg-primary">条件名称</th>
                                                    <th class="bg-primary" style="width:100px;">操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><input type="text" class="form-control" ng-model="rule.rule_name" placeholder="条件１名称" title="条件１名称" /></td>
                                                    <td style="text-align:center;">
                                                        <button type="button" ng-click="vm.removeLawsRule(rule)" class="btn btn-danger btn-sm"><i class="glyphicon glyphicon-trash"></i> 削除</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <button type="button" ng-click="vm.pushLawsRuleField(rule)" class="btn btn-success pull-left">
                                            <span class="glyphicon glyphicon-plus"></span> 物件データ項目 追加
                                        </button>
                                        <br/><br/>
                                        <div class="input_select_field_1">  
                                            
                                            <table id="law_sort_table" class="editableTable table table-striped table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th class="bg-primary" style="width:80px;">物件項目</th>
                                                        <th class="bg-primary" >大項目</th>
                                                        <th class="bg-primary" >小項目</th>
                                                        <th class="bg-primary" >値</th>
                                                        <th class="bg-primary" >操作</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr data-ng-repeat="rule_field in rule.fields">
                                                        <td>
                                                            <select ng-model="rule_field.bukken" 
                                                            class="form-control" ng-change="vm.selectBukken(rule_field)" 
                                                            ng-options="p.bukken as p.bukken_name for p in vm.bukken" ></select>
                                                        </td>
                                                        <td>
                                                            <select ng-show="rule_field.bukken" 
                                                            ng-model="rule_field.deuta1" 
                                                            ng-change="vm.selectDai(rule_field)" 
                                                            class="form-control" 
                                                            ng-options="p.daikoumoku as p.daikoumoku_name for p in rule_field.optionDai"></select>
                                                        </td>
                                                        <td>
                                                            <select ng-show="rule_field.deuta1 && rule_field.optionKo" 
                                                            ng-model="rule_field.deuta2" 
                                                            ng-change="vm.selectKo(rule_field)" 
                                                            class="form-control"
                                                            ng-options="p.kokoumoku as p.kokoumoku_name for p in rule_field.optionKo"></select>
                                                        </td>
                                                        <td>
                                                            <div class="properties" data-ng-repeat="property in rule_field.properties">
                                                                <div ng-switch on="property.type">
                                                                    <input ng-model="property.type" type="hidden"/>
                                                                    <div ng-switch-when="1">
                                                                        <input ng-model="property.value" class="form-control" type="text"/>
                                                                    </div>
                                                                    <div ng-switch-when="2">
                                                                        <select ng-model="property.value" class="form-control" 
                                                                        ng-options="o as o for o in property.options"></select>
                                                                    </div>
                                                                    <div ng-switch-when="3">
                                                                        <label ng-repeat="ck in property.options">
                                                                            <input ng-model="property.value" type="checkbox" checklist-value="ck"> {{ck}}
                                                                        </label>
                                                                    </div>
                                                                    <div ng-switch-when="4">
                                                                        <input ng-model="property.value" class="form-control" type="text"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td style="text-align:center;">
                                                            
                                                            <button type="button" ng-click="vm.removeLawsRuleField(rule, rule_field)" class="btn btn-danger btn-sm"><i class="glyphicon glyphicon-trash"></i> 削除</button>
                                                        </td>
                                                    </tr>
                                                    
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- #入力Form -->